<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—î—é</title>
    <link rel="icon" href="data:,">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="lottery-styles.css">
</head>
<body>
<div id="loginScreen" class="screen active">
    <div class="login-container">
        <div class="login-box">
            <h1>–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—î—é</h1>
            <form id="loginForm">
                <div class="form-group">
                    <label for="userRole">–†–æ–ª—å:</label>
                    <select id="userRole" required>
                        <option value="">–í–∏–±–µ—Ä—ñ—Ç—å —Ä–æ–ª—å</option>
                        <option value="hostess">–•–æ—Å—Ç–µ—Å</option>
                        <option value="admin">–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="password">–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="password" required>
                </div>
                <button type="submit" class="btn btn-primary">–£–≤—ñ–π—Ç–∏</button>
            </form>
        </div>
    </div>
</div>

<div id="mainApp" class="screen">
    <header class="app-header">
        <div class="header-content">
            <h1>–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è 2025</h1>
            <div class="header-info">
                <div class="connection-status">
                    <span class="status-indicator" id="statusIndicator"></span>
                    <span id="statusText">–û–Ω–ª–∞–π–Ω</span>
                </div>
                <div class="user-info">
                    <span id="currentUser">–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á</span>
                    <button id="logoutBtn" class="btn btn-secondary">–í–∏–π—Ç–∏</button>
                </div>
            </div>
        </div>
    </header>

    <nav class="app-nav">
        <button class="nav-btn active" data-tab="checkin">
            <span class="nav-icon">‚úì</span>
            –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è
        </button>
        <button class="nav-btn" data-tab="donation">
            <span class="nav-icon">üí∞</span>
            –î–æ–Ω–∞—Ç–∏
        </button>
        <button class="nav-btn admin-only" data-tab="participants">
            <span class="nav-icon">üë•</span>
            –£—á–∞—Å–Ω–∏–∫–∏
        </button>
        <button class="nav-btn admin-only" data-tab="lottery">
            <span class="nav-icon">üé≤</span>
            –†–æ–∑—ñ–≥—Ä–∞—à
        </button>
        <button class="nav-btn admin-only" data-tab="settings">
            <span class="nav-icon">‚öôÔ∏è</span>
            –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
        </button>
    </nav>

    <main class="app-content">
        <div id="checkinTab" class="tab-panel active">
            <div class="panel-header">
                <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è —É—á–∞—Å–Ω–∏–∫—ñ–≤</h2>
            </div>
            <div class="panel-body">
                <div class="qr-scanner-container">
                    <div id="qrReader"></div>
                    <div class="scanner-controls">
                        <button id="startScanBtn" class="btn btn-primary">
                            –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∫–∞–Ω–µ—Ä
                        </button>
                        <button id="stopScanBtn" class="btn btn-secondary" style="display:none;">
                            –ó—É–ø–∏–Ω–∏—Ç–∏ —Å–∫–∞–Ω–µ—Ä
                        </button>
                    </div>
                    <div class="manual-input-group">
                        <input type="text" id="manualQrInput" placeholder="–ê–±–æ –≤–≤–µ–¥—ñ—Ç—å QR-–∫–æ–¥ –≤—Ä—É—á–Ω—É">
                        <button id="manualCheckInBtn" class="btn btn-primary">
                            –ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <div id="donationTab" class="tab-panel">
            <div class="panel-header">
                <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –¥–æ–Ω–∞—Ç—ñ–≤</h2>
            </div>
            <div class="panel-body">
                <div class="qr-scanner-container">
                    <div id="donationQrReader"></div>
                    <div class="scanner-controls">
                        <button id="startDonationScanBtn" class="btn btn-primary">
                            –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–∫–∞–Ω–µ—Ä
                        </button>
                        <button id="stopDonationScanBtn" class="btn btn-secondary" style="display: none;">
                            –ó—É–ø–∏–Ω–∏—Ç–∏ —Å–∫–∞–Ω–µ—Ä
                        </button>
                    </div>
                </div>

                <form id="donationForm" class="donation-form">
                    <div class="form-group">
                        <label for="donationQrCode">QR-–∫–æ–¥ —É—á–∞—Å–Ω–∏–∫–∞:</label>
                        <input type="text" id="donationQrCode" placeholder="–ê–±–æ –≤–≤–µ–¥—ñ—Ç—å QR-–∫–æ–¥ –≤—Ä—É—á–Ω—É" required>
                    </div>
                    <div class="form-group">
                        <label for="donationAmount">–°—É–º–∞ –¥–æ–Ω–∞—Ç—É (–≥—Ä–Ω):</label>
                        <input type="number" id="donationAmount" min="1" step="0.01" required>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        –î–æ–¥–∞—Ç–∏ –¥–æ–Ω–∞—Ç
                    </button>
                </form>
            </div>
        </div>

        <div id="participantsTab" class="tab-panel">
            <div class="panel-header">
                <h2>–°–ø–∏—Å–æ–∫ —É—á–∞—Å–Ω–∏–∫—ñ–≤</h2>
                <div class="panel-actions">
                    <button id="exportExcelBtn" class="btn btn-secondary">
                        –ï–∫—Å–ø–æ—Ä—Ç –≤ Excel
                    </button>
                    <button id="exportDonorsBtn" class="btn btn-secondary">
                        –ï–∫—Å–ø–æ—Ä—Ç –¥–æ–Ω–æ—Ä—ñ–≤ 500+
                    </button>
                </div>
            </div>
            <div class="panel-body">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="totalParticipants">0</div>
                        <div class="stat-label">–í—Å—å–æ–≥–æ —É—á–∞—Å–Ω–∏–∫—ñ–≤</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="presentParticipants">0</div>
                        <div class="stat-label">–ü—Ä–∏—Å—É—Ç–Ω—ñ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="totalDonations">0‚Ç¥</div>
                        <div class="stat-label">–°—É–º–∞ –¥–æ–Ω–∞—Ç—ñ–≤</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="bigDonors">0</div>
                        <div class="stat-label">–î–æ–Ω–æ—Ä–∏ 500+</div>
                    </div>
                </div>

                <div class="search-container">
                    <input type="text" id="participantSearch" placeholder="–ü–æ—à—É–∫ –∑–∞ —ñ–º–µ–Ω–µ–º –∞–±–æ QR-–∫–æ–¥–æ–º...">
                </div>

                <div class="table-container">
                    <table class="data-table">
                        <thead>
                        <tr>
                            <th>QR-–∫–æ–¥</th>
                            <th>–Ü–º'—è</th>
                            <th>–ü—Ä—ñ–∑–≤–∏—â–µ</th>
                            <th>–ü—Ä–∏—Å—É—Ç–Ω—ñ—Å—Ç—å</th>
                            <th>–î–æ–Ω–∞—Ç (–≥—Ä–Ω)</th>
                        </tr>
                        </thead>
                        <tbody id="participantsTableBody">
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="lotteryTab" class="tab-panel">
            <div class="panel-header">
                <h2>–†–æ–∑—ñ–≥—Ä–∞—à –ø—Ä–∏–∑—ñ–≤</h2>
            </div>
            <div class="panel-body">
                <div class="lottery-container">
                    <div class="lottery-stats">
                        <div class="lottery-stat-card">
                            <div class="lottery-stat-icon">üë•</div>
                            <div class="lottery-stat-info">
                                <div class="lottery-stat-value" id="eligibleCount">0</div>
                                <div class="lottery-stat-label">–£—á–∞—Å–Ω–∏–∫—ñ–≤ (500+ –≥—Ä–Ω)</div>
                            </div>
                        </div>
                        <div class="lottery-stat-card">
                            <div class="lottery-stat-icon">üí∞</div>
                            <div class="lottery-stat-info">
                                <div class="lottery-stat-value" id="totalDonationsLottery">0‚Ç¥</div>
                                <div class="lottery-stat-label">–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞ –¥–æ–Ω–∞—Ç—ñ–≤</div>
                            </div>
                        </div>
                    </div>

                    <div class="lottery-setup">
                        <h3>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–∑—ñ–≥—Ä–∞—à—É</h3>
                        <div class="lottery-form">
                            <div class="form-group">
                                <label for="winnersCount">–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–µ—Ä–µ–º–æ–∂—Ü—ñ–≤:</label>
                                <input type="number" id="winnersCount" min="1" max="10" value="1" placeholder="–ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø–µ—Ä–µ–º–æ–∂—Ü—ñ–≤">
                                <small class="form-hint">–û–±–µ—Ä—ñ—Ç—å –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø–µ—Ä–µ–º–æ–∂—Ü—ñ–≤</small>
                            </div>

                            <button id="startLotteryBtn" class="btn btn-primary btn-large">
                                üéØ –†–æ–∑–ø–æ—á–∞—Ç–∏ —Ä–æ–∑—ñ–≥—Ä–∞—à
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="lotteryModal" class="modal lottery-modal">
            <div class="modal-content lottery-modal-content">
                <div id="lotteryAnimation" class="lottery-animation-container">
                </div>
            </div>
        </div>

        <div id="settingsTab" class="tab-panel">
            <div class="panel-header">
                <h2>–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è</h2>
            </div>
            <div class="panel-body">
                <div class="settings-section">
                    <h3>–Ü–º–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö</h3>
                    <div class="file-upload-container">
                        <input type="file" id="importFile" accept=".xlsx,.xls" style="display:none;">
                        <button onclick="document.getElementById('importFile').click()" class="btn btn-secondary">
                            –í–∏–±—Ä–∞—Ç–∏ —Ñ–∞–π–ª Excel
                        </button>
                        <button id="importBtn" class="btn btn-primary">
                            –Ü–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏
                        </button>
                    </div>
                </div>

                <div class="settings-section">
                    <h3>–î–æ–¥–∞—Ç–∏ —É—á–∞—Å–Ω–∏–∫–∞</h3>
                    <form id="addParticipantForm">
                        <div class="form-row">
                            <div class="form-group">
                                <input type="text" id="newQrCode" placeholder="QR-–∫–æ–¥" required>
                            </div>
                            <div class="form-group">
                                <input type="text" id="newName" placeholder="–Ü–º'—è" required>
                            </div>
                            <div class="form-group">
                                <input type="text" id="newSurname" placeholder="–ü—Ä—ñ–∑–≤–∏—â–µ" required>
                            </div>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            –î–æ–¥–∞—Ç–∏ —É—á–∞—Å–Ω–∏–∫–∞
                        </button>
                    </form>
                </div>

                <div class="settings-section">
                    <h3>–°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è</h3>
                    <button id="syncBtn" class="btn btn-secondary">
                        –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑—É–≤–∞—Ç–∏ –∑ Google Sheets
                    </button>
                    <div id="lastSync">–û—Å—Ç–∞–Ω–Ω—è —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è: -</div>
                </div>
            </div>
        </div>
    </main>
</div>

<div id="notificationContainer" class="notification-container"></div>

<script src="https://unpkg.com/html5-qrcode/html5-qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
<script src="lottery.js"></script>
<script src="config.js"></script>
<script src="api.js"></script>
<script src="app.js"></script>
</body>
</html>